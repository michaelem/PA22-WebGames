(()=>{var y=class{constructor(t,n,l){this.x_coord=t,this.upper_corner=n*400,this.space_height=400,this.context=l,this.seen=!1}move(t){this.x_coord-=t}draw(t){this.context.fillStyle="darkGreen",this.context.fillRect(this.x_coord,0,150,t),this.context.fillStyle="hsl(195, 92%, 75%)",this.context.fillRect(this.x_coord,this.upper_corner,150,this.space_height)}};var w=new Image;w.src="birdy.png";var m=class{constructor(t,n){this.x_coord=50,this.y_coord=50,this.height=135,this.acc=1,this.context=t,this.window_height=n,this.score=0}check_collision_and_score(t){if(this.y_coord>this.window_height)return!0;{let n=this.x_coord+133.5,l=this.y_coord+232*.75/2;for(let s of t){let d=s.x_coord+75;if(n-d<0&&n-d>-170){let i=l-s.upper_corner;if(i<100/2||i>s.space_height-100/2)return!0}else if(n-d>0&&n-d<170){s.seen||(s.seen=!0,this.score+=1);let i=l-s.upper_corner;if(i<100||i>s.space_height-100)return!0}}}}fall(t,n){return this.acc+=1.5,this.y_coord+=1*this.acc/(t%10+1),this.check_collision_and_score(n)}jump(t){return this.acc=-30,this.check_collision_and_score(t)}draw(){this.context.drawImage(w,this.x_coord,this.y_coord,356*.75,232*.75)}};var u,e,h=0;var a,o=[];var _=0,x=!0,k=0,f,c,p=new Set;function T(){h%150==0&&o.push(new y(f+10,Math.random(),e))}function b(){p.has("ArrowDown")&&(a=new m(e,c),_=1,o=[])}function C(){h=h+1,T();for(let t of o)t.move(5),t.x_coord<-200&&o.splice(o.indexOf(t),1);a.fall(h,o)&&(_=2)}function S(){switch(e.fillStyle="hsl(195, 92%, 75%)",e.fillRect(0,0,f,c),_){case 0:e.strokeStyle="black",e.fillStyle="DarkRed",e.font="64px serif",e.fillText("Flappy Birdy",100,150),e.strokeText("Flappy Birdy",100,150),e.font="48px serif",e.fillText("Press v (keydown) to start",100,250),e.strokeText("Press v (keydown) to start",100,250),e.fillText("Press ^ to jump",100,300),e.strokeText("Press ^ to jump",100,300);break;case 1:for(let r of o)r.draw(c);a.draw(),e.fillStyle="black";break;case 2:e.fillStyle="DarkRed",e.font="64px serif",e.fillText("Game over :(",100,150),e.strokeText("Game over :(",100,150),e.font="48px serif",e.fillText("Press v (keydown) to start again",100,250),e.strokeText("Press v (keydown) to start again",100,250),e.fillText("Score: "+a.score,100,300),e.strokeText("Score: "+a.score,100,300);break}}function R(r){switch(_){case 0:b();break;case 1:C();break;case 2:b();break}}function g(r){let t=r-k;k=r,R(t/1e3),S(),window.requestAnimationFrame(g)}function D(){f=window.innerWidth,c=window.innerHeight,u.width=f,u.height=c}function v(r){switch(r.type){case"keydown":p.add(r.key),r.key=="ArrowUp"&&x&&(p.add(r.key),x=!1,a.jump(o));break;case"keyup":p.delete(r.key),x=!0;break;default:console.warn(r.type)}}function E(){u=document.getElementById("canvas"),e=u.getContext("2d"),window.addEventListener("keydown",v),window.addEventListener("keyup",v),D(),g(performance.now())}E();})();
//# sourceMappingURL=main.js.map
