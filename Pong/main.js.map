{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["var canvas: HTMLCanvasElement;\nvar context: CanvasRenderingContext2D;\n\n// game variables\ntype Color = {r: number, g: number, b: number}\ntype Canvas = {height: number, width: number}\n\nvar MyCanvas: Canvas;\nvar MyBall: Ball;\nvar Left_Bar: Bar;\nvar Right_Bar: Bar;\n\nvar game_over: boolean = false;\n\nvar middle = {\n    x: 400,\n    y: 400\n}\nvar r = 100;\nvar r_pos = r;\nvar v_r = 100; // pixels per second\nvar hue = 0;\n\n// system variables\nvar last_tick_t = 0;\nvar width: number;\nvar height: number;\nvar keyStates: Set<string> = new Set();\nvar plop = new Audio('plop.wav');\n\nvar logo = new Image();\nlogo.src = \"logo.png\";\n\n\n// Vektor-Class\nclass Vector {\n    x: number;\n    y: number;\n\n\n    constructor(_x: number = 0, _y: number = 0) {\n        this.x = _x;\n        this.y = _y;\n    }\n\n\n    absolute(): number {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n\n    unit_vector(): Vector {\n        return this.mult(1 / this.absolute()) \n    }\n\n    mirror(side: number) {  // top 0 / button 1 / left 2 / right 3\n        console.log(\"UNSERE SEITE\")\n        console.log(side)\n\n        if (side == 0) {\n            this.y = -this.y;\n        } else if (side == 1) {\n            this.y = -this.y;\n        } else if (side == 2) {\n            this.x = -this.x;\n        } else if (side == 3) {\n            this.x = -this.x;\n        } else {\n            throw new Error(\"Invalid argument in Vector mirror-methode\");\n        }\n    }\n\n    add(vector: Vector): Vector {\n        return new Vector(this.x + vector.x, this.y + vector.y)\n    }\n\n    sub(vector: Vector) {\n        return new Vector(this.x - vector.x, this.y - vector.y)\n    }\n\n    mult(numb: number): Vector {\n        return new Vector(this.x * numb, this.y * numb)\n    }\n\n}\n\n\n// Point-Class\nclass Point {\n    x: number;\n    y: number;\n\n    constructor(_x: number = 0, _y: number = 0) {\n        this.x = _x;\n        this.y = _y;\n    }\n\n    add_vector(vec: Vector): Point {\n        this.x = this.x + vec.x;\n        this.y = this.y + vec.y;\n        return this;\n    }\n\n    sub_vector(vec: Vector): Point {\n        this.x = this.x - vec.x;\n        this.y = this.y - vec.y;\n        return this;\n    }\n\n    not_in_display(): number {\n        if (this.x < 0)\n            return 2;\n        else if (this.x > width)\n            return 3;\n        else if (this.y < 0)\n            return 0;\n        else if (this.y > height)\n            return 1;\n        else\n            return -1;\n    }\n\n    on_bar(): number {  // left 2, right 3\n        let one_time_right: boolean = false\n        let one_time_left: boolean = false\n        \n        if (this.x + MyBall.radius > Right_Bar.position.x) {\n            console.log(\"X rechts von Bar\")\n\n            if (this.y > Right_Bar.position.y && this.y < Right_Bar.position.y + Right_Bar.size.y) {\n                if (one_time_right == false) {\n                    return 2\n                }\n            }\n\n            one_time_right = true\n        } else {\n            one_time_right = false;\n        }\n\n\n        if (this.x < Left_Bar.position.x) {\n            console.log(\"X links von Bar\")\n\n            if (this.y > Left_Bar.position.y && this.y < Left_Bar.position.y + Left_Bar.size.y) {\n                if (one_time_left == false) {\n                    return 2\n                }\n            }\n\n            one_time_left = true\n        } else {\n            one_time_left = false;\n        } \n\n        return -1\n\n\n    }\n}\n\n\n// Ball-Class\nclass Ball {\n    postition: Point;\n    speed: Vector;\n    readonly radius: number;\n    readonly color: Color;\n    readonly accelerate: number;\n\n    constructor(_radius: number, _position: Point, _speed: Vector, _color: Color) {\n        this.postition = _position;\n        this.color = _color;\n        this.radius = _radius;\n        this.speed = _speed;\n    }\n\n    move(times: number = 1) {\n        // calc new position\n        // let new_postition = new Point(this.speed.x * this.accelerate * times, this.speed.y * this.accelerate * times);\n        let new_postition = new Point(this.postition.x, this.postition.y)\n        // console.log(\"Speed\")\n        // console.log(this.speed)\n        new_postition.add_vector(this.speed)\n        \n        \n        // calc vector to move the ball\n        let unit_move_vector = new Vector(this.speed.unit_vector().x, this.speed.unit_vector().y)\n        // console.log(\"Unit_Vec\")\n        // console.log(unit_move_vector)\n\n        \n        // Anzahl, die der Einheitsvektor gegangen werden muss\n        let abs_floor: number = Math.floor(this.speed.absolute());\n        // console.log(\"Betrag Speed abgerunded\")\n        // console.log(abs_floor)\n\n        // Rest WICHTIG: Das muss vielleicht nach die for-Schleife\n        let rest: number = this.speed.absolute() - abs_floor;\n        \n        \n        // Starte Iteration und berechne n\u00E4chsten \"Unterpunkt\"\n        let next_position = new Point(this.postition.x, this.postition.y);\n        for(abs_floor; abs_floor >= 0; abs_floor--) {\n            // console.log(\"ICH werde ausgef\u00FChrt\")\n\n\n            // next_position (die Position nach dem n\u00E4chsten Weitergehen des Einheitsvektors)\n            next_position.add_vector(unit_move_vector);\n\n            let result_value: number = next_position.not_in_display();\n            if (result_value != -1) {\n                // console.log(\"OUT of Display\")\n                next_position.sub_vector(unit_move_vector);\n                \n                if (result_value == 2 || result_value == 3) {\n                    game_over = true;\n                    console.log(\"Game Over\");\n                } else {\n                    // console.log(\"Unit_invers\")\n                    // console.log(unit_move_vector)\n                    unit_move_vector.mirror(result_value);\n                    this.speed.mirror(result_value)\n                    // console.log(unit_move_vector)\n                    next_position.add_vector(unit_move_vector);\n                }\n            } else {\n                console.log(\"Not out of Display\")\n            }\n        }\n\n        next_position.add_vector(unit_move_vector.mult(rest));\n\n        this.postition = next_position;\n\n        let result_value = this.postition.on_bar();\n            if (result_value != -1) {\n                // next_position.sub_vector(unit_move_vector);\n                \n                if (result_value == 2 || result_value == 3) {\n                    unit_move_vector.mirror(result_value);\n                    this.speed.mirror(result_value)\n                    \n                    // next_position.add_vector(unit_move_vector);\n                }\n\n            } else {\n                // console.log(\"Not on bar\")\n            }\n\n    }\n    \n}\n\n\n// Spieler Balken Klasse\nclass Bar {\n    position: Point;\n    readonly speed: number;\n    readonly size: Point;\n    readonly color: Color;\n\n    constructor(_position: Point, _size: Point, _speed: number, _color: Color) {\n        this.position = _position;\n        this.size = _size;\n        this.speed = _speed;\n        this.color = _color;\n    }\n\n    is_on_border_top(): boolean {\n        if (this.position.y > 0) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    is_on_border_button(): boolean {\n        if (this.position.y + this.size.y < height) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    move_up() {\n        if (this.position.y > 0)\n            this.position.y -= this.speed;\n    }\n\n    move_down() {\n        if (this.position.y < height - this.size.y)\n            this.position.y += this.speed;\n    }\n\n\n}\n\n\nfunction draw() {\n    if (game_over == false) {\n        context.resetTransform();\n        context.clearRect(0, 0, width, height);\n\n        context.fillStyle = \"black\";\n        context.fillRect(0, 0, width, height);\n        \n\n        context.fillStyle = \"white\";\n\n        context.fillRect(MyBall.postition.x, MyBall.postition.y, MyBall.radius, MyBall.radius)\n\n        context.fillRect(Left_Bar.position.x, Left_Bar.position.y, Left_Bar.size.x, Left_Bar.size.y)\n        context.fillRect(Right_Bar.position.x, Right_Bar.position.y, Right_Bar.size.x, Right_Bar.size.y)\n    } else {\n        context.font = \"80px Arial Black\";\n        context.fillStyle = \"red\";\n        context.fillText(\"GAME OVER\", width / 2 - 250, height / 2 - 20);\n    }\n\n}\n\nfunction update(dt: number) {\n    MyBall.move()\n\n    if (keyStates.has(\"w\")) {\n        Left_Bar.move_up();\n    } else if (keyStates.has(\"s\")) {\n        Left_Bar.move_down();\n    }\n\n    if (keyStates.has(\"ArrowUp\")) {\n        Right_Bar.move_up();\n    } else if (keyStates.has(\"ArrowDown\")) {\n        Right_Bar.move_down();\n    }\n\n    //ArrowUp\n\n\n    //console.log(MyBall.postition.x)\n    //console.log(MyBall.postition.y)\n    \n    /*\n    // radial position\n    r_pos += v_r * dt;\n    if (r_pos > 1.5 * r) {\n        v_r = - v_r;\n        r_pos = 1.5 * r;\n    } else if (r_pos < 0.1 * r) {\n        v_r = - v_r;\n        r_pos = 0.1 * r;\n    }\n    // color\n    hue = (hue + 1) % 360;\n\n    if (!keyStates.has(\"ArrowUp\")) {\n        // position\n        middle.x += 200 * dt;\n        middle.y += 200 * dt;\n        if (middle.x > width) {\n            plop.play();\n            middle.x = 0;\n        }\n        if (middle.y > height) {\n            plop.play();\n            middle.y = 0;\n        }\n    }\n    */\n}\n\nfunction loop(t_ms: number) {\n    // calculate dt\n    let dt = t_ms - last_tick_t;\n    last_tick_t = t_ms;\n\n    update(dt / 1000); // to seconds\n    draw();\n\n    window.requestAnimationFrame(loop);\n}\n\nfunction resized() {\n    width = window.innerWidth;\n    height = window.innerHeight;\n    canvas.width = width;\n    canvas.height = height;\n}\n\nfunction key(e: KeyboardEvent) {\n    switch (e.type) {\n        case \"keydown\":\n            keyStates.add(e.key);\n            break;\n        case \"keyup\":\n            keyStates.delete(e.key);\n            break;\n        default:\n            console.warn(\"Wut?\");\n    }\n}\n\nfunction click(e: MouseEvent) {\n    middle.x = e.offsetX;\n    middle.y = e.offsetY;\n}\n\nfunction main() {\n    canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n    context = canvas.getContext(\"2d\")!;\n    window.addEventListener(\"keydown\", key);\n    window.addEventListener(\"keyup\", key);\n    window.addEventListener(\"resize\", resized);\n    canvas.addEventListener(\"click\", click);\n    resized();\n\n    // Test Point\n    let MyPoint = new Point(2, 4);\n    let MyVec = new Vector(6, 1);\n    MyPoint.add_vector(MyVec)\n\n    console.log(\"Testpoint\")\n    console.log(MyPoint.x)\n    console.log(MyPoint.y)\n\n    // Init Ball\n    MyBall = new Ball(40, new Point(500, 200), new Vector(5, -3), {r: 0, g: 0, b: 200})\n\n    // Init Bar\n    Left_Bar = new Bar(new Point(100, 100), new Point(20, 200), 3, {r: 0, g: 0, b: 200})\n    Right_Bar = new Bar(new Point(width - 100, 100), new Point(20, 200), 3, {r: 0, g: 0, b: 200})\n\n    loop(performance.now());\n}\n\n\nmain();\n\n// b.kuhstoss@web.de"],
  "mappings": "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",
  "names": []
}
