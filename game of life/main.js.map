{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["var canvas: HTMLCanvasElement;\nvar context: CanvasRenderingContext2D;\n\n// game variables\nvar size = 100;\nvar world: boolean[][];\n\nvar pause = false;\n\n// system variables\nvar last_tick_t = 0;\nvar width: number;\nvar height: number;\nvar keyStates: Set<string> = new Set();\n\nfunction initializeWorld() {\n    world = [];\n    for(let x=0; x<size; x++) {\n        world[x] = [];\n        for(let y=0; y<size; y++) {\n            world[x][y] = Math.random() > 0.6;\n        }\n    }\n}\n\nfunction draw() {\n    context.resetTransform();\n    context.clearRect(0, 0, width, height);\n    // select color\n    context.fillStyle = \"green\"\n\n    // draw polygon/path\n    for(let x=0; x<size; x++) {\n        for(let y=0; y<size; y++) {\n            if(world[x][y]) {\n                context.fillRect(x*width/size, y*height/size, width/size, height/size);\n            }\n        }\n    }\n    context.fillStyle = \"black\";\n    context.scale(5,5);\n    context.fillText(\"press any key to pause\", 20, 20)\n    context.fillText(\"press R to reset\", 20, 30);\n}\n\nfunction newState(x: number, y: number) {\n    let neis = 0;\n    for(let i=-1; i<=1; i++) {\n        for(let j=-1; j<=1; j++) {\n            if(world[(x+i+size)%size][(y+j+size)%size]) {\n                neis++;\n            }\n        }\n    }\n    if(neis == 3) return true;\n    if(neis == 4 && world[x][y]) return true;\n    return false;\n}\n\nfunction update(dt: number) {\n    // copy wolrd\n    let newWorld: boolean[][];\n    newWorld = []\n    for(let x=0; x<size; x++) {\n        newWorld[x] = [];\n        for(let y=0; y<size; y++) {\n            newWorld[x][y] = newState(x, y);\n        }\n    }\n    world = newWorld;\n}\n\nfunction loop(t_ms: number) {\n    // calculate dt\n    let dt = t_ms - last_tick_t;\n    last_tick_t = t_ms;\n\n    if(!pause) {\n        update(dt / 1000); // to seconds\n        draw();\n    }\n\n    window.requestAnimationFrame(loop);\n}\n\nfunction resized() {\n    width = window.innerWidth;\n    height = window.innerHeight;\n    canvas.width = width;\n    canvas.height = height;\n}\n\nfunction key(e: KeyboardEvent) {\n    switch (e.type) {\n        case \"keydown\":\n            console.log(e.key);\n            if(e.key == \"r\") {\n                initializeWorld();\n                break;\n            }\n            keyStates.add(e.key);\n            pause = !pause;\n            break;\n        case \"keyup\":\n            keyStates.delete(e.key);\n            break;\n        default:\n            console.warn(\"Wut?\");\n    }\n}\n\nfunction click(e: MouseEvent) {\n\n}\n\nfunction main() {\n    canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n    context = canvas.getContext(\"2d\")!;\n    window.addEventListener(\"keydown\", key);\n    window.addEventListener(\"keyup\", key);\n    window.addEventListener(\"resize\", resized);\n    canvas.addEventListener(\"click\", click);\n    resized();\n    initializeWorld();\n\n    loop(performance.now());\n}\n\n\nmain();"],
  "mappings": "MAAA,GAAI,GACA,EAGA,EAAO,IACP,EAEA,EAAQ,GAGR,EAAc,EACd,EACA,EACA,EAAyB,GAAI,KAEjC,YAA2B,CACvB,EAAQ,CAAC,EACT,OAAQ,GAAE,EAAG,EAAE,EAAM,IAAK,CACtB,EAAM,GAAK,CAAC,EACZ,OAAQ,GAAE,EAAG,EAAE,EAAM,IACjB,EAAM,GAAG,GAAK,KAAK,OAAO,EAAI,EAEtC,CACJ,CAEA,YAAgB,CACZ,EAAQ,eAAe,EACvB,EAAQ,UAAU,EAAG,EAAG,EAAO,CAAM,EAErC,EAAQ,UAAY,QAGpB,OAAQ,GAAE,EAAG,EAAE,EAAM,IACjB,OAAQ,GAAE,EAAG,EAAE,EAAM,IACjB,AAAG,EAAM,GAAG,IACR,EAAQ,SAAS,EAAE,EAAM,EAAM,EAAE,EAAO,EAAM,EAAM,EAAM,EAAO,CAAI,EAIjF,EAAQ,UAAY,QACpB,EAAQ,MAAM,EAAE,CAAC,EACjB,EAAQ,SAAS,yBAA0B,GAAI,EAAE,EACjD,EAAQ,SAAS,mBAAoB,GAAI,EAAE,CAC/C,CAEA,WAAkB,EAAW,EAAW,CACpC,GAAI,GAAO,EACX,OAAQ,GAAE,GAAI,GAAG,EAAG,IAChB,OAAQ,GAAE,GAAI,GAAG,EAAG,IAChB,AAAG,EAAO,GAAE,EAAE,GAAM,GAAO,GAAE,EAAE,GAAM,IACjC,IAKZ,MADG,MAAQ,GACR,GAAQ,GAAK,EAAM,GAAG,GAE7B,CAEA,WAAgB,EAAY,CAExB,GAAI,GACJ,EAAW,CAAC,EACZ,OAAQ,GAAE,EAAG,EAAE,EAAM,IAAK,CACtB,EAAS,GAAK,CAAC,EACf,OAAQ,GAAE,EAAG,EAAE,EAAM,IACjB,EAAS,GAAG,GAAK,EAAS,EAAG,CAAC,CAEtC,CACA,EAAQ,CACZ,CAEA,WAAc,EAAc,CAExB,GAAI,GAAK,EAAO,EAChB,EAAc,EAEV,GACA,GAAO,EAAK,GAAI,EAChB,EAAK,GAGT,OAAO,sBAAsB,CAAI,CACrC,CAEA,YAAmB,CACf,EAAQ,OAAO,WACf,EAAS,OAAO,YAChB,EAAO,MAAQ,EACf,EAAO,OAAS,CACpB,CAEA,WAAa,EAAkB,CAC3B,OAAQ,EAAE,UACD,UAED,GADA,QAAQ,IAAI,EAAE,GAAG,EACd,EAAE,KAAO,IAAK,CACb,EAAgB,EAChB,KACJ,CACA,EAAU,IAAI,EAAE,GAAG,EACnB,EAAQ,CAAC,EACT,UACC,QACD,EAAU,OAAO,EAAE,GAAG,EACtB,cAEA,QAAQ,KAAK,MAAM,EAE/B,CAEA,WAAe,EAAe,CAE9B,CAEA,YAAgB,CACZ,EAAS,SAAS,eAAe,QAAQ,EACzC,EAAU,EAAO,WAAW,IAAI,EAChC,OAAO,iBAAiB,UAAW,CAAG,EACtC,OAAO,iBAAiB,QAAS,CAAG,EACpC,OAAO,iBAAiB,SAAU,CAAO,EACzC,EAAO,iBAAiB,QAAS,CAAK,EACtC,EAAQ,EACR,EAAgB,EAEhB,EAAK,YAAY,IAAI,CAAC,CAC1B,CAGA,EAAK",
  "names": []
}
