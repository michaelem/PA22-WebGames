{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["var canvas: HTMLCanvasElement;\nvar context: CanvasRenderingContext2D;\n\n//startpos\nvar pos = {\n    x: 600,\n    y: 400\n}\nenum Direction {\n    Right = 1,\n    Left, \n    Center,\n    Boost\n}\n\nfunction getRandomInt(max: number) {\n    return Math.floor(Math.random() * max);\n  }\n\nvar cnt1 = 0;\n\nvar momDirection = Direction.Center; // pixels per second\nvar v_movement = 200; // pixels per second\nvar v_background = 220; // pixels per second\n\ntype Point = { x: number,y: number, sizex:number, sizey:number, dflag:boolean}\nvar liste:Point[] = [];\nvar failed:boolean = false;\n\n// system variables\nvar last_tick_t = 0;\nvar width: number;\nvar height: number;\nvar keyStates: Set<string> = new Set();\nvar plop = new Audio('plop.wav');\n\nvar logo = new Image();\nlogo.src = \"spaceship.png\";\n\nvar logoleft = new Image();\nlogoleft.src = \"spaceshipleft.png\";\n\nvar logoright = new Image();\nlogoright.src = \"spaceshipright.png\";\n\nvar logoboost = new Image();\nlogoboost.src = \"spaceshipboost.png\";\n\nvar fail = new Image();\nfail.src = \"fail.png\";\n\nfunction draw() {\n    context.resetTransform();\n    context.clearRect(0, 0, width, height);\n    //Background \n    context.fillStyle = `hsl(237, 61%, 19%)`\n    context.fillRect(0, 0, width, height);\n    //Stars\n    if(failed == true){\n        context.drawImage(fail, -180, -200);\n    }\n    \n\n    context.fillStyle = `hsl(0, 100%, 100%)`\n    \n    for(let a of liste) {\n        context.fillRect(a.x-(a.sizex/2), a.y-(a.sizey/2), a.sizex, a.sizex);\n    }\n\n    context.translate(pos.x, pos.y);\n    if(momDirection == Direction.Left){\n        context.drawImage(logoleft, -35, -35);\n    }\n\n    if(momDirection == Direction.Right){\n        context.drawImage(logoright, -35, -35);\n    }\n    \n    if(momDirection == Direction.Center){\n        context.drawImage(logo, -35, -35);\n    }\n\n    if(momDirection == Direction.Boost){\n        context.drawImage(logoboost, -35, -35);\n    }\n    \n\n\n}\n\nfunction update(dt: number) {\n    if (pos.y < 35) {          //up down\n        pos.y = 35;\n        plop.play();\n    }\n    if (pos.y > height - 35) {\n        pos.y = height - 35;\n        plop.play();\n    }\n\n    if (pos.x < 35) {              //left right\n        pos.x = 35;\n        plop.play();\n    }\n    if (pos.x > width - 35) {\n        pos.x = width - 35;\n        plop.play();\n    }\n\n    if (keyStates.has(\"ArrowUp\")) {\n        pos.y -= v_movement * dt;\n        momDirection = Direction.Boost;\n    }\n    if (keyStates.has(\"ArrowDown\")) {\n        pos.y += v_movement * dt;\n    }\n\n    if (keyStates.has(\"ArrowLeft\")) {\n        // position\n        pos.x -= v_movement * dt;\n        momDirection = Direction.Left;\n    }\n\n    if (keyStates.has(\"ArrowRight\")) {\n        // position\n        pos.x += v_movement * dt;\n        momDirection = Direction.Right;\n    }\n\n\n    if (!keyStates.has(\"ArrowRight\") && !keyStates.has(\"ArrowLeft\") && !keyStates.has(\"ArrowUp\")) {\n        momDirection = Direction.Center;\n    }\n}\n\nfunction Stars(dt: number) {\n    for(let a of liste) {\n        a.y += v_background * dt;\n    }\n\n    if(cnt1 == 10){\n        liste.push({x:getRandomInt(width),y:-100, sizex:20+getRandomInt(20), sizey:10+getRandomInt(40),dflag:false});\n        cnt1 = 0;\n    }\n    cnt1++;\n\n    for(let a of liste) {\n        if(a.y > height+100){\n            a.dflag = true;\n        }\n\n    }\n\n    for(let a of liste) {\n        if(Math.abs(pos.x - a.x)< (25 + (a.sizex/2))   && Math.abs(pos.y - a.y)< (15 + (a.sizey/2)) ){\n            failed = true;\n            a.dflag = true;\n        }\n        \n    }\n\n\n    liste = liste.filter((e)=>!e.dflag)\n\n}\n\nfunction loop(t_ms: number) {\n    // calculate dt\n    let dt = t_ms - last_tick_t;\n    last_tick_t = t_ms;\n\n    update(dt / 1000); // to seconds\n    Stars(dt / 1000);\n    draw();\n\n    window.requestAnimationFrame(loop);\n}\n\nfunction resized() {\n    width = window.innerWidth;\n    height = window.innerHeight;\n    canvas.width = width;\n    canvas.height = height;\n}\nfunction key(e: KeyboardEvent) {\n    switch (e.type) {\n        case \"keydown\":\n            keyStates.add(e.key);\n            break;\n        case \"keyup\":\n            keyStates.delete(e.key);\n            break;\n        default:\n            console.warn(\"Wut?\");\n    }\n}\n\nfunction click(e: MouseEvent) {\n    pos.x = e.offsetX;\n    pos.y = e.offsetY;\n}\n\nfunction main() {\n    canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n    context = canvas.getContext(\"2d\")!;\n    window.addEventListener(\"keydown\", key);\n    window.addEventListener(\"keyup\", key);\n    window.addEventListener(\"resize\", resized);\n    canvas.addEventListener(\"click\", click);\n    resized();\n\n    loop(performance.now());\n}\n\n\nmain();"],
  "mappings": "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",
  "names": []
}
