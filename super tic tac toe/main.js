(()=>{var k,e;var w=new Set,g=0,M=0,o,a,T,u,v,m;function y(){m=0,u=-1,v=-1,T=1,o=[],a=[];for(let t=0;t<3;t++){o[t]=[],a[t]=[];for(let n=0;n<3;n++){o[t][n]=[],a[t][n]=0;for(let r=0;r<3;r++){o[t][n][r]=[];for(let s=0;s<3;s++)o[t][n][r][s]=0}}}}function h(t){e.beginPath(),e.moveTo(100,0),e.lineTo(100,300),e.moveTo(200,0),e.lineTo(200,300),e.moveTo(0,100),e.lineTo(300,100),e.moveTo(0,200),e.lineTo(300,200);for(let n=0;n<3;n++)for(let r=0;r<3;r++)t[n][r]==1&&(e.moveTo(80+100*n,50+100*r),e.arc(50+100*n,50+100*r,30,0,2*Math.PI)),t[n][r]==2&&(e.moveTo(20+100*n,20+100*r),e.lineTo(80+100*n,80+100*r),e.moveTo(20+100*n,80+100*r),e.lineTo(80+100*n,20+100*r));e.stroke()}function b(){e.resetTransform(),e.clearRect(0,0,900,900),e.fillStyle="black";let t=[[0,1,2],[0,1,0],[1,2,0]];for(let n=0;n<3;n++){for(let r=0;r<3;r++)a[n][r]==-1&&(e.fillStyle="light grey",e.fillRect(0,0,300,300),e.fillStyle="black"),h(o[n][r]),e.translate(0,300);e.translate(300,-900)}e.resetTransform(),e.scale(3,3),h(a),e.strokeStyle="red",u!=-1?e.strokeRect(u*100,v*100,100,100):e.strokeRect(0,0,300,300),e.strokeStyle="black",e.scale(3,3),e.beginPath(),m==1&&(e.moveTo(80,50),e.arc(50,50,30,0,2*Math.PI)),m==2&&(e.moveTo(20,20),e.lineTo(80,80),e.moveTo(20,80),e.lineTo(80,20)),e.stroke()}function l(t){switch(t.type){case"keydown":w.add(t.key),t.key=="r"&&y();break;case"keyup":w.delete(t.key);break;default:console.warn("Wut?")}}function E(t){return t[0][0]!=0&&t[0][0]==t[0][1]&&t[0][1]==t[0][2]?t[0][0]:t[1][0]!=0&&t[1][0]==t[1][1]&&t[1][1]==t[1][2]?t[1][0]:t[2][0]!=0&&t[2][0]==t[2][1]&&t[2][1]==t[2][2]?t[2][0]:t[0][0]!=0&&t[0][0]==t[1][0]&&t[1][0]==t[2][0]?t[0][0]:t[0][1]!=0&&t[0][1]==t[1][1]&&t[1][1]==t[2][1]?t[0][1]:t[0][2]!=0&&t[0][2]==t[1][2]&&t[1][2]==t[2][2]?t[0][2]:t[0][0]!=0&&t[0][0]==t[1][1]&&t[1][1]==t[2][2]?t[0][0]:t[2][0]!=0&&t[2][0]==t[1][1]&&t[1][1]==t[0][2]?t[2][0]:t[0][0]!=0&&t[0][1]!=0&&t[0][2]!=0&&t[1][0]!=0&&t[1][1]!=0&&t[1][2]!=0&&t[2][0]!=0&&t[2][1]!=0&&t[2][2]!=0?-1:0}function S(t){let n=Math.floor(t.offsetX/300),r=Math.floor(t.offsetY/300),s=Math.floor((t.offsetX/300-n)*3),i=Math.floor((t.offsetY/300-r)*3);if(m==0&&a[n][r]==0&&o[n][r][s][i]==0&&(u==-1||n==u&&r==v)){o[n][r][s][i]=T,T=3-T;let c=E(o[n][r]);c>0&&(a[n][r]=c,c=E(a),c>0&&(m=c)),a[s][i]==0?(u=s,v=i):(u=-1,v=-1)}b()}function x(){y(),b()}function L(t){g=t.offsetX,M=t.offsetY}function R(){y(),k=document.getElementById("canvas"),e=k.getContext("2d"),window.addEventListener("keydown",l),window.addEventListener("keyup",l),k.addEventListener("click",S),k.addEventListener("mousemove",L),document.getElementById("newgame").addEventListener("click",x),b()}R();})();
//# sourceMappingURL=main.js.map
